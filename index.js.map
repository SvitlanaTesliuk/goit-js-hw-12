{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46065548-5ae4334dfe4b7f7d37f4bc842';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst perPage = 15;\n\nexport async function fetchImages(query, page = 1) {\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${perPage}&page=${page}`;\n  \n    try {\n      const response = await axios.get(url);\n      if (response.status !== 200) {\n        throw new Error('Failed to fetch images');\n      }\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching images:', error);\n      throw error;\n    }\n  }\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\n\nconst galleryElement = document.querySelector('.gallery');\n\nexport function renderImages(images) {\n  const markup = images.map(image => createImageCard(image)).join('');\n  galleryElement.insertAdjacentHTML('beforeend', markup);\n  refreshGallery();\n}\n\nfunction createImageCard({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n  return `\n    <a href=\"${largeImageURL}\" class=\"gallery__item\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" class=\"gallery__image\" />\n      <div class=\"info\">\n        <p><b>Likes:</b> ${likes}</p>\n        <p><b>Views:</b> ${views}</p>\n        <p><b>Comments:</b> ${comments}</p>\n        <p><b>Downloads:</b> ${downloads}</p>\n      </div>\n    </a>\n  `;\n}\n\nexport function clearGallery() {\n  galleryElement.innerHTML = '';\n}\n\nexport function showErrorMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n  });\n}\n\nlet lightbox;\n\nfunction refreshGallery() {\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a');\n  } else {\n    lightbox.refresh();\n  }\n}","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, clearGallery, showErrorMessage } from './js/render-function.js';\n\nconst form = document.querySelector('#search-form');\nconst input = document.querySelector('input[name=\"searchQuery\"]');\nconst loader = document.querySelector('#loader');\nconst loadMoreBtn = document.querySelector('#load-more');\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nform.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(event) {\n    event.preventDefault();\n    currentQuery = input.value.trim();\n    currentPage = 1;  \n  \n    if (!currentQuery) {\n      showErrorMessage('Please enter a search query.');\n      return;\n    }\n  \n    clearGallery();\n    showLoader();\n  \n    try {\n      const data = await fetchImages(currentQuery, currentPage);\n      hideLoader();\n  \n      if (data.hits.length === 0) {\n        showErrorMessage('Sorry, there are no images matching your search query. Please try again!');\n        loadMoreBtn.style.display = 'none';  \n        return;\n      }\n  \n      totalHits = data.totalHits;\n      renderImages(data.hits);\n      loadMoreBtn.style.display = currentPage * 15 < totalHits ? 'block' : 'none';  \n  \n    } catch (error) {\n      hideLoader();\n      showErrorMessage('Failed to fetch images. Please try again later.');\n    }\n  }\n  \n  async function onLoadMore() {\n    currentPage += 1;  \n    showLoader();\n  \n    try {\n      const data = await fetchImages(currentQuery, currentPage);\n      hideLoader();\n  \n      renderImages(data.hits);\n      loadMoreBtn.style.display = currentPage * 15 < totalHits ? 'block' : 'none'; \n  \n      \n      const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n  \n    } catch (error) {\n      hideLoader();\n      showErrorMessage('Failed to fetch more images. Please try again later.');\n    }\n  }\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}"],"names":["API_KEY","BASE_URL","perPage","fetchImages","query","page","url","response","axios","error","galleryElement","renderImages","images","markup","image","createImageCard","refreshGallery","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showErrorMessage","message","iziToast","lightbox","SimpleLightbox","form","input","loader","loadMoreBtn","currentPage","currentQuery","totalHits","onSearch","onLoadMore","event","showLoader","data","hideLoader","cardHeight"],"mappings":"+vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BACXC,EAAU,GAET,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CAC/C,MAAMC,EAAM,GAAGL,CAAQ,QAAQD,CAAO,MAAM,mBAAmBI,CAAK,CAAC,qEAAqEF,CAAO,SAASG,CAAI,GAE9J,GAAI,CACF,MAAME,EAAW,MAAMC,EAAM,IAAIF,CAAG,EACpC,GAAIC,EAAS,SAAW,IACtB,MAAM,IAAI,MAAM,wBAAwB,EAE1C,OAAOA,EAAS,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACL,CCZA,MAAMC,EAAiB,SAAS,cAAc,UAAU,EAEjD,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAASD,EAAO,IAAIE,GAASC,EAAgBD,CAAK,CAAC,EAAE,KAAK,EAAE,EAClEJ,EAAe,mBAAmB,YAAaG,CAAM,EACrDG,GACF,CAEA,SAASD,EAAgB,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,GAAa,CACjG,MAAO;AAAA,eACML,CAAa;AAAA,kBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA,2BAEjBC,CAAK;AAAA,2BACLC,CAAK;AAAA,8BACFC,CAAQ;AAAA,+BACPC,CAAS;AAAA;AAAA;AAAA,GAIxC,CAEO,SAASC,GAAe,CAC7Bd,EAAe,UAAY,EAC7B,CAEO,SAASe,EAAiBC,EAAS,CACxCC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,CACb,CAAG,CACH,CAEA,IAAIE,EAEJ,SAASZ,GAAiB,CACnBY,EAGHA,EAAS,QAAO,EAFhBA,EAAW,IAAIC,EAAe,YAAY,CAI9C,CC7CA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQ,SAAS,cAAc,2BAA2B,EAC1DC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EACvD,IAAIC,EAAc,EACdC,EAAe,GACfC,EAAY,EAEhBN,EAAK,iBAAiB,SAAUO,CAAQ,EACxCJ,EAAY,iBAAiB,QAASK,CAAU,EAEhD,eAAeD,EAASE,EAAO,CAK3B,GAJAA,EAAM,eAAc,EACpBJ,EAAeJ,EAAM,MAAM,OAC3BG,EAAc,EAEV,CAACC,EAAc,CACjBV,EAAiB,8BAA8B,EAC/C,MACD,CAEDD,IACAgB,IAEA,GAAI,CACF,MAAMC,EAAO,MAAMtC,EAAYgC,EAAcD,CAAW,EAGxD,GAFAQ,IAEID,EAAK,KAAK,SAAW,EAAG,CAC1BhB,EAAiB,0EAA0E,EAC3FQ,EAAY,MAAM,QAAU,OAC5B,MACD,CAEDG,EAAYK,EAAK,UACjB9B,EAAa8B,EAAK,IAAI,EACtBR,EAAY,MAAM,QAAUC,EAAc,GAAKE,EAAY,QAAU,MAEtE,MAAe,CACdM,IACAjB,EAAiB,iDAAiD,CACnE,CACF,CAED,eAAea,GAAa,CAC1BJ,GAAe,EACfM,IAEA,GAAI,CACF,MAAMC,EAAO,MAAMtC,EAAYgC,EAAcD,CAAW,EACxDQ,IAEA/B,EAAa8B,EAAK,IAAI,EACtBR,EAAY,MAAM,QAAUC,EAAc,GAAKE,EAAY,QAAU,OAGrE,KAAM,CAAE,OAAQO,CAAU,EAAK,SAAS,cAAc,UAAU,EAAE,kBAAkB,wBACpF,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAO,CAEF,MAAe,CACdD,IACAjB,EAAiB,sDAAsD,CACxE,CACF,CAEH,SAASe,GAAa,CACpBR,EAAO,MAAM,QAAU,OACzB,CAEA,SAASU,GAAa,CACpBV,EAAO,MAAM,QAAU,MACzB"}